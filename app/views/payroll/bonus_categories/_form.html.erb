<%= form_for @bonus_category, html: {id: 'bonus_category_form'}, remote: true do |f| %>
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span></button>
      <i class="fa fa-newspaper-o"></i>
      <h4 class="modal-title"> Add New Bonus Category </h4>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <%= f.label :name, 'Title' %>
        <%= f.text_field :name, class: 'form-control', data: {required: true} %>
      </div>
      <div class="col-md-12 reset-padding">
        <div class="col-md-5 reset-padding">
          <div class="form-group">
            <%= f.label 'Amount / Percentage' %> <br/>
            <%= f.radio_button :is_amount, true %>
          </div>
        </div>
        <div class="col-md-7 reset-padding">
          <div class="form-group">
            <%= f.label :amount, id: 'bonus-amount-label' %>
            <%= f.text_field :amount, class: 'form-control' %>
          </div>
        </div>
      </div>
      <div class="form-group">
        <%= f.label :message, 'Note' %>
        <%= f.text_area :message, rows: 3, class: 'form-control' %>
      </div>
      <% if params[:inline].present? %>
          <%= hidden_field_tag 'inline', params[:inline] %>
          <%= hidden_field_tag 'employee_id', params[:employee_id] %>
      <% end %>
    </div>
    <div class="modal-footer">
      <%= f.submit class: 'btn btn-primary' %>
      <div class="btn btn-default" data-dismiss='modal'>Cancel</div>
    </div>
<% end %>

<script type="text/javascript">
    $(function () {
        $('#bonus_category_form').syftValidator();
        $("[name='payroll_bonus_category[is_amount]']").bootstrapSwitch({
            radioAllOff: true,
            onColor: "success",
            offColor: "warning",
            onText: 'Amount',
            offText: 'Percentage',
            onSwitchChange: function (event, state) {
                if (state) {
                    $('#bonus-amount-label').html('Amount');
                }
                else {
                    $('#bonus-amount-label').html('Percentage');
                }
            }
        });

        <% if !@bonus_category.new_record? && !@bonus_category.is_amount %>
        $('#bonus-amount-label').html('Percentage');
        <% end %>
    });
</script>