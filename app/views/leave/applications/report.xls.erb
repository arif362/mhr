<div class="site-header">
  <% if params[:is_recent].present? %>
      <div class="text-center">
        <h3>Upcomming Leaves</h3>
      </div>
  <% else %>
      <div class="text-center">
        <h3>Yearly Leave Applications</h3>
      </div>
      <div class="text-center">
        <h4><%= params[:date].present? ? params[:date][:year] : Date.today.year %></h4>
      </div>
  <% end %>
</div>

<div class="panel table-warapper", id="application-report-table">
  <div class="table-warapper-body">
    <table class="table action-table beaccount-table tablesorter table-responsive table-hover table-striped">
      <thead>
      <tr class="trew">
        <th>Name</th>
        <th>Leave Type</th>
        <th>Total Days</th>
        <th>Days</th>
        <th></th>
      </tr>
      </thead>
      <tbody>
      <% if params[:is_recent].present? %>
          <% @recent_leave_days.each do |leave_day| %>
              <tr>
                <td><%= leave_day.leave_application.employee.full_name %></td>
                <td><%= leave_day.leave_application.leave_category.name %></td>
                <td><%= leave_day.leave_application.total_days %></td>
                <% days = '' %>
                <% leave_day.leave_application.leave_days.each do |application_leave_day| %>
                    <% if application_leave_day.is_approved %>
                        <% days = days.present? ? days + ', ' + application_leave_day.day.to_s : application_leave_day.day.to_s %>
                    <% end %>
                <% end %>
                <td><%= days %></td>
                <td>
                  <%= link_to leave_application_path(leave_day.leave_application, no_admin: true), remote: true do %>
                      <i class="fa fa-eye"> </i>
                  <% end %>
                </td>
              </tr>
          <% end %>
      <% else %>
          <% @leave_days_in_a_year.each do |leave_day| %>
              <tr>
                <td><%= leave_day.leave_application.employee.full_name %></td>
                <td><%= leave_day.leave_application.leave_category.name %></td>
                <td><%= leave_day.leave_application.total_days %></td>
                <% days = '' %>
                <% leave_day.leave_application.leave_days.each do |application_leave_day| %>
                    <% if application_leave_day.is_approved %>
                        <% days = days.present? ? days + ', ' + application_leave_day.day.to_s : application_leave_day.day.to_s %>
                    <% end %>
                <% end %>
                <td><%= days %></td>
                <td>
                  <%= link_to leave_application_path(leave_day.leave_application, no_admin: true), remote: true do %>
                      <i class="fa fa-eye"> </i>
                  <% end %>
                </td>
              </tr>
          <% end %>
      <% end %>
      </tbody>
    </table>
  </div>
</div>