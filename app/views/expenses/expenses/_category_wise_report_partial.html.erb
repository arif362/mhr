<div class="table-warapper">
  <div class="table-warapper-body">
    <table class="table beaccount-table tablesorter table-responsive table-hover table-striped">
      <thead>
      <tr>
        <th>Sub Category</th>
        <% AppSettings::MONTHS_SHORT_NAME.each do |month| %>
            <th><%= month %></th>
        <% end %>
        <th><b>Total</b></th>
      </tr>
      </thead>
      <tbody>
      <% @expense_sub_categories.each do |sub_category| %>
          <tr>
            <td>
              <%= sub_category.name %>
            </td>
            <% (1..12).each do |month| %>
                <td>
                  <% if @expense_report[sub_category.id][month][:amount] > 0 %>
                      <%= link_to report_breakdown_expenses_expenses_path(sub_category_id: sub_category.id, month: month, year: @start_date.year), target: "_blank" do%>
                          <%= @expense_report[sub_category.id][month][:amount] %>
                      <% end %>
                  <% else %>
                      <%= @expense_report[sub_category.id][month][:amount] %>
                  <% end %>
                </td>
            <% end %>
            <td>
              <b>
                <% if @expense_report[sub_category.id][:total_amount] > 0 %>
                    <%= link_to report_breakdown_expenses_expenses_path(sub_category_id: sub_category.id, year: @start_date.year), target: "_blank" do%>
                        <%= @expense_report[sub_category.id][:total_amount] %>
                    <% end %>
                <% else %>
                    <%= @expense_report[sub_category.id][:total_amount] %>
                <% end %>
              </b>
            </td>
          </tr>
      <% end %>
      <% if @expense_sub_categories.present? %>
          <tr>
            <td><b>Total</b></td>
            <% (1..12).each do |month| %>
                <td>
                  <b>
                    <% if @expense_report.present? && @expense_report[:month_total].present? && @expense_report[:month_total][month] > 0 %>
                        <%= link_to report_breakdown_expenses_expenses_path(category_id: @expense_category.id, month: month, year: @start_date.year), target: "_blank" do%>
                            <%=  @expense_report[:month_total][month] %>
                        <% end %>
                    <% else %>
                        <%= '0' %>
                    <% end %>
                  </b>
                </td>
            <% end %>
            <td>
              <b>
                <% if @expense_report.present? && @expense_report[:month_total].present? && @expense_report[:month_total][:amount] > 0 %>
                    <%= link_to report_breakdown_expenses_expenses_path(category_id: @expense_category.id, year: @start_date.year), target: "_blank" do%>
                        <%=  @expense_report[:month_total][:amount] %>
                    <% end %>
                <% else %>
                    <%= '0' %>
                <% end %>
              </b>
            </td>
          </tr>
      <% end %>
      </tbody>
    </table>
    <div class="no-data-found">
      <% unless @expense_sub_categories.present? %>
          <%= render 'shared/no_data_found', message: 'No sub category found' %>
      <% end %>
    </div>
  </div>
</div>