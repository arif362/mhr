<div class="row reset-padding">
  <div class="header-wrapper">
    <h4>
      Expense Report Breakdown
    </h4>
  </div>
  <div class="secondary-color">
    <div class="content-body-wrapper">
      <div class="row content-body">
        <div class="col-sm-12 reset-padding">
          <div class="pull-right">
            <%= select_tag :export_to, options_for_select(AppSettings::EXPORT_TO.collect { |opt| [opt.camelize, opt] }), {class: 'form-control custom-export-to reset-border-radius', prompt: 'Export To....'} %>
          </div>
        </div>
        <%= render 'report_breakdown_expenses' %>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
    $(function () {
        $("#date_year").on('change', function () {
            $('#yearly-expense-report-form').submit();
        });

        $('#export_to').on('change', function () {
            var export_to = $(this).val();
            if (export_to == '<%= AppSettings::EXPORT_TO[0] %>') {
                window.location.href = '<%= report_breakdown_expenses_expenses_path('pdf', params) %>'
            }
            else if (export_to == '<%= AppSettings::EXPORT_TO[2] %>') {
                window.location.href = '<%= report_breakdown_expenses_expenses_path('docx', params) %>'
            }
            else if (export_to == '<%= AppSettings::EXPORT_TO[1] %>') {
                window.location.href = '<%= report_breakdown_expenses_expenses_path('xls',  params) %>'
            }
        });
    });
</script>
